# Lagrange Docs

[![github pages](https://github.com/adobe/lagrange-docs/actions/workflows/gh-pages.yml/badge.svg?branch=docs)](https://github.com/adobe/lagrange-docs/actions/workflows/gh-pages.yml)

This repository contains the source files used to generate the Lagrange documentation website. The generated documentation is available at the following URL:

https://opensource.adobe.com/lagrange-docs/

The documentation is rebuilt by GitHub Actions every time a new commit is pushed to `docs` branch.

## Editing

## How to edit

Markdown files, except those generated automatically by Doxygen, can be edited directly through this website or once you clone the repository.

If you want to preview the resulting html page, follow the steps below on how to build the documentation locally.

## Theme

The documentation uses the [mkdocs-material](https://squidfunk.github.io/mkdocs-material/) theme. The theme comes with some extensions, e.g. [Admonition](https://squidfunk.github.io/mkdocs-material/extensions/admonition/). Use Admonition for things like notes, warnings, caveats, examples, etc.

## Images

For now images and other media are stored in subfolders in `docs/`

## Building locally

### 1. Clone the `docs` branch

The `master` branch is reserved for the static html pages. It is advised to only clone the `docs` branch (the default branch), rather than doing a full clone of the repository:

```bash
git clone git@github.com:adobe/lagrange-docs.git --single-branch
```

### 2. Install/update prerequisites with conda

Run the following [conda](https://docs.conda.io/en/latest/miniconda.html) command to install/update dependencies:
```
conda env update -f conda.yml
```

This will create/update a conda environment containing the following prerequisites:
- [doxygen](http://www.doxygen.nl/)
- python3
- python packages: mkdocs, mkdocs-material, etc.


### 3. Activate `lagrange-website` conda environment

```bash
conda activate lagrange-website
```

### 3. Generate doxygen + changelog

```
./generate.py <PATH_TO_LAGRANGE_ROOT>
```

> __Note__: This will populate the following:
> - `docs/Reference/`: html files generated by Doxygen

### 4. Create static website

The following will run a local server at [127.0.0.1:8000](http://127.0.0.1:8000/)

```
mkdocs serve
```

Alternatively, use `mkdocs build` to generate files into `site` folder

### Deploy

<details><summary>Click to expand!</summary>

> __Note__: This is for reference only, GitHub Actions does this automatically. Pushing to `master` is restricted to GitHub Actions.

```
mkdocs gh-deploy -b master
```

will push to `master` branch automatically, which will update the website.
</details>


## Contributing

Contributions are welcomed! Read the [Contributing Guide](./.github/CONTRIBUTING.md) for more information.

## Licensing

The documentation and code snippets on this repository/website are licensed under the [CC0 1.0 Universal License](LICENSE). See [LICENSE](LICENSE) for more information.
